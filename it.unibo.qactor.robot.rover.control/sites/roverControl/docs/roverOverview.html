<!doctype html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      https://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
--> 
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>RoverOverview</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="./images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="./images/ios-desktop.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="./images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="shortcut icon" href="./images/favicon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.cyan-light_blue.min.css">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>

<div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">      
<!-- HEADER (in alto)  --> 
      <header class="demo-header mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600"> 
         <div class="mdl-layout__header-row">
          <span class="mdl-layout-title">The rover-robot system</span>
          <div class="mdl-layout-spacer"></div>
           <div class="mdl-layout__header-row portfolio-navigation-row">
                <nav class="mdl-navigation mdl-typography--body-1-force-preferred-font">
                    <a class="mdl-navigation__link" href="#tocheck">Tocheck</a>
					<!-- <a class="mdl-navigation__link" href="#qamodel">Analysis Model</a>   -->             
                </nav>
            </div>
          </div>
      </header>
     
<!-- NAVIGATION sinistra item list -->       
<div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-50 mdl-color-text--light-blue-200">
<nav class="demo-navigation mdl-navigation mdl-color--blue-grey-200">
   <a class="mdl-navigation__link" href="index.html">
   <i class="mdl-color-text--light-green-A100 material-icons" role="presentation">home</i>
   Home</a>
</nav>
</div>
 
         
<!-- MAIN PAGE center -->
<main class="mdl-layout__content mdl-color--grey-100">
<div class="mdl-grid demo-content" id="welcome">
 
<!-- ZONA 1  -->
<div class="demo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid">
<div class="mdl-card__supporting-text mdl-color-text--light-blue-900"> 
<h5>Real robots</h5>
 A real robot can be conceived as:
    <ul>
    
    <li>an 'intelligent', <b>autonomous</b>  device, programmed  to execute useful tasks</li>
        <li>an <b>'executor of commands'</b> emitted (as messages and/or events) by a remote 'mind' </li>
    <li>a mix of the previous two cases</li>
    </ul>
    
Moreover, a real robot can be also a <i>source of sensor data </i> (stream of events) that can be handled locally by the robot itself or remotely by the robot's 'mind'.
    <!--
<br/> <br/> 
It is quite obvious that the production of a 
    
The project shows how a simple, low-cost differential drive robot
    
<br/> <br/> 
-->
<h5>Virtual robots</h5>
    
In order to acquire as soon as possible fedbacks from the customers, the program running on a real-robot should be developed and tested with reference to a mock-robot working in a simulated environment.
    <br/> <br/> 
The <a href="https://en.wikipedia.org/wiki/Unity_(game_engine)">Unity game engine</a> provides a powerful support
    to create and use such simulated environments.
 <br/> <br/> 
  A virtual-robot can be introduced as an image of a real robot, projected into a virtual Unity scene. Thus, the main
    task of a virtual robot is to show within the virtual environment the behaviour of a real-robot, expressed
    by the <b>same software that will run on that concrete robot</b>.
 <br/> <br/>
    Most of the work has been done here by <tt>Federico Ruggeri</tt>, who has provided a first form of interoperability between the Unity and the QActor systems.
    
<h5>Technology indepenedent Robots</h5>
Thus, a first goal is to build software able to work with reference two different types of robots:
    <ol>
    <li>the virtual-robot (during the software development phase) </li>
    <li>the real-robot (during the product deployment phase)</li>
    </ol>
A second goal is to build software able to work with reference to different configurations of a physical robot.
Most of the work has been done here by <tt>Sam Golovchenko</tt>, who has provided a framework .    
    
    
    
 <h5>QActors and Unity</h5>  
To facilitate the achievement of the goal of the previous section, a QActor has been extended by proving the following
    operations:
<ul>
<li><pre>
public void workWithUnity( ){
    initUnityConnection("127.0.0.1");
    createSimulatedActor();
}
</pre>
</li>
    
<li><pre>initUnityConnection( String ipaddr )</pre>
This operations requires that a Unity scene is running (on the localhost <tt>127.0.0.1</tt>). An exemple of a scene is introduced in section <a href="#unity">Uniy scenes</a></li>
    
<li><pre>public void  createSimulatedActor( String prefabs )   </pre>
    
    This operation sends (via a TCP connection) a command (in QActor format) to create (in prefixed point of the scene) 
    a virtual robot (named at the moment "robotfacade")</li>   

<li> <pre>public void moveVirtualActor(String direction, float speed, float duration, float angle)</pre> 
    This operation 'moves' the virtual-robot in the scene: For example:
    <prre>moveVirtualActor("S", 30, 1, 0 )</prre>
    </li>  
</ul>    

    At the monent, no extension has been made on the QActor metamodel (<tt>qa</tt> language). Thus these operations must be explicitly invoked via the <tt>actorOp</tt> operator. For example:
<pre>
Plan init normal                                                       
      actorOp workWithUnity("127.0.0.1") ; 	
      actorOp moveVirtualActor( "W", 30, 1, 0 )
</pre>

    
<h5>Virtual robots as sensor-data generators</h5>     
In the current implementation, the virtual-robot is equipped (in fornt) with a sonar that can detect obstacles. In this case,
    it emits a QActor event of the form:
<pre>sonarDetect : sonarDetect(X)</pre>
    Thsi event is sent (via the TCP connection) from Unity to the QActor system, that handles such an Unity-event as a conventional QActor event. 
    <br/><br/>
    In this way the robot-program can perceive and handle events raised from a virtual world.
    
    
<h5 id="unity">Uniy scenes</h5>    
A prefixed Unity enviroment is provided for testing purposed by the file <a href="../../../unity/virtualRobot.zip">virtualRobot.zip</a> (60Mb) that provides the following scene (without and with a robot in it)  
    
    <table>
<tr><td><img src="./images/sceneBase.jpg" width="401" heigth="315" /></td>
<td><img src="./images/sceneBaseWithRobot.jpg" width="401" heigth="315" /></td>    
</tr>   
</table>

    
    
 <h5>The relationship between real and virtual robots</h5>   
 The usage of a virtual robot (in the context of some Unity scene that
 simulates real-world aspects, like gravity, conflicts, etc) is mainly useful
 during the requirement analysis phase and during software development, in order to test
 as soon as possible the logical behavior of the system, by using an 'advanced mock' robot.  
 <br/><br/>   

    When the system is deployed, a question arises:
    <br/><br/>
    <li>do we keep the virtual robot sitll active  or not?</li>
<br/>
 If the asnwer is positivie, we can reproduce the real-robot behaviour in the virtual scene. The drawback
    is of course the introduction of some overhead in the behaviour, more communications over the netwroks
    and in new possible sources of errors.
<br/><br/>
On the other side,  we can merge the real world with some virtual reality and create new type of applications. 
 
<h5>The real robot as a command executor</h5> 
Instead of loading the robot control program on a real-robot, we can include the robot control logic 
    within a separate actor that works like a remote 'mind'. Such a 'robot mind' can be tested  
    by using a standalone 'advanced mock' working within some Unity virtual scene.
<br/><br/>
    Moreover, we can avoid any dependency of a real robot form the virtual scene, by giving to the 'robot mind' the task
 to update the virtual scene (in the same node as the 'robot mind' itself). In this way,
    a real robot (running for example over a RaspberryPi)  does not have the responsibility to update the virtual scene,
    while being 'sensible' to events coming from it.
    
<h5 id="tocheck">To check</h5> 
<ul>
<li>SocketExecption: host sconosciuto</li>
<li>PrologError: permission UnityActorSimulator</li>
<li></li>
<li>Insert a logo in the scene</li>
</ul>
    
<h5 id="tocheck">Experiments</h5> 
<ul>
<li>move('W',10,2,0) : obstacle detected and then going back</li>
<li>move('W',30,2,0) : obstacle detected and moved and then going back</li>
<li></li>
<li></li>
</ul>    
 
    
</div>
</div>    

<!-- ZONA 2  
<div class="demo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid">
<h5 id="qamodel">Analysis Model</h5>
<object width="750" height="400" type="text/plain" data="../../src/radargui.qa" border="1" ></object>
</div>            

  ZONA 2 
<div class="demo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-grid">
TODO: zone2 ( mdl-cell--4-col)
</div>    
 -->
</div>
</main>
     
<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</body>
</html>
